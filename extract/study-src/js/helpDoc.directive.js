angular.module("infi-basic").directive('adminHelpDoc',function(){
	return {
		restrict: 'ECMA',
        template: '<div class="modal fade" id="help" ng-if="isAdmin">'
			        +'<div class="modal-dialog">'
			        +'<div class="modal-content">'
			        +'<div class="modal-header">'
			        +'        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"></span></button>'
			        +'        <h1 class="modal-title modal-reset">帮助文档</h1>'
			        +'    </div>'
			        +'    <div class="modal-body">'
			        +'        <h3>1. 传染病调查表筛选</h3>'
			        +'        <p>通过一级页面右上角下拉列表切换所需疾病调查表，“数据录入”、“数据检索”、“数据提取”、“录入审核”、“查看审核”、“取数审核”均显示当前疾病调查表信息。</p>'
			        +'        <img src="../src/image/helpDoc/1.png">'
			        +'        <h3>2. 数据录入与录入审核</h3>'
			        +'        <h4>数据录入</h4>'
			        +'        <p>页面上方显示总体KPI，“本月录入病历数”、“本月录入病历通过率”、“本月待处理病历数”。</p>'
			        +'        <img src="../src/image/helpDoc/2.png">'
			        +'        <p>数据录入列表显示所有创建的病历，可通过创建时间筛选与当前状态筛选，快捷查找病历。可以查看病历详情，删除，与打印。注：病历在经过一次审核通过后不可删除。</p>'
			        +'        <p>当前状态分4类：</p>'
			        +'        <ol>'
			        +'        	<li>已保存：完成创建病历与完善资料后保存并返回时的状态。</li>'
			        +'        	<li>待审核：点击提交后，管理员未审核时的状态。</li>'
			        +'        	<li>审核通过：管理员审核通过后的状态。</li>'
			        +'        	<li>审核驳回：管理员审核驳回时的状态。</li>'
			        +'        </ol>'
			        +'        <h4>新增病历</h4>'
			        +'        <p>在数据录入列表点击“新增病历”，需填写“上报医院”、“病历号”、“第几次入院”，点击“创建”完成新增病历。</p>'
			        +'        <img src="../src/image/helpDoc/3.png">'
			        +'        <h4>完善资料</h4>'
			        +'        <p>本功能通常用于初次创建病历后完善资料，以及审核通过或驳回会对病历进行进一步完善与修改，在已提交后“待审核”状态不可使用。</p>'
			        +'        <p>点击“完善资料”，进入数据录入界面，通过点击页面右下角 “填写下一模块”与“左侧模块导航”切换模块，完成数据录入后点击“保存并返回”。</p>'
			        +'        <p>录入数据类型分为“文本型”、“单选型”、“复选型”、“日期型”、“图片型”。</p>'
			        +'        <p>文本型数据录入形式：</p>'
			        +'        <img src="../src/image/helpDoc/4.png">'
			        +'        <img src="../src/image/helpDoc/5.png">'
			        +'        <p>单选型数据录入形式：</p>'
			        +'        <img src="../src/image/helpDoc/6.png">'
			        +'        <p>复选型数据录入形式：</p>'
			        +'        <img src="../src/image/helpDoc/7.png">'
			        +'        <p>日期型数据录入形式：</p>'
			        +'        <img src="../src/image/helpDoc/8.png">'
			        +'        <p>图片型数据录入形式：</p>'
			        +'        <img src="../src/image/helpDoc/9.png">'
			        +'        <p>当前病历在完善资料时，如有曾经通过的版本，则在当前病历右侧显示该病历最近一次审核通过版本，页面中提示本模块共有几处不同，两份病历数据不同的字段在当前病历标记为红色，提供参考作用。</p>'
			        +'        <img src="../src/image/helpDoc/10.png">'
			        +'        <h4>医学影像</h4>'
			        +'        <p>为防止医学影像被其他人剽窃，在影像上传时系统会自动添加水印。</p>'
			        +'        <p>图像查看详情时可拖动，放大缩小，旋转，可单个下载，也可以批量下载。</p>'
			        +'        <img src="../src/image/helpDoc/11.png">'
			        +'        <h4>提交</h4>'
			        +'        <p>点击“提交”后弹出窗口询问是否提交。在“待审核”与“审核驳回”状态不能使用提交功能。审核驳回后，需完善资料再保存才可提交。</p>'
			        +'        <h4>审核驳回信息列表</h4>'
			        +'        <p>为避免因病历录入列表数据量过大，导致有些审核驳回的病历忘记修改，设置病理驳回信息列表，被驳回的病历可以由此进入修改，保存并返回后，该条驳回病历在本列表自动删除。</p>'
			        +'        <img src="../src/image/helpDoc/12.png">'
			        +'        <h4>录入审核</h4>'
			        +'        <p>录入审核页面上方显示“已审核病历数”、 “已审核病历通过率”和“待审核病历数”。录入审核列表可按“待审核”、“审核通过”、“审核驳回”三种状态切换。</p>'
			        +'        <p>系统管理员可以使用“录入审核”功能，病历提交后在录入审核列表为“待审核”状态，可以通过提交时间筛选功能快捷查找病历，点击“详情”查看病历内容，如当前病历有曾经通过的版本，则在当前病历右侧显示该病历最近一次审核通过版本，页面中提示本模块共有几处不同，两份病历数据不同的字段在当前病历标记为红色，提供参考作用。</p>'
			        +'        <p>点击“审核”，选择 “通过”或“驳回”，填写审核理由，通过可不填写，如驳回需填写理由。</p>'
			        +'        <h3>3. 数据检索</h3>'
			        +'        <p>可通过输入关键词，点击热门关键词快速检索到相关病历。并查看病历详情。</p>'
			        +'        <img src="../src/image/helpDoc/13.png">'
			      /*  +'        <h3>4. 查看审核</h3>'
			        +'        <p>审核普通用户发来的数据查看申请，审核通过后该用户可以查看申请数据的影像学信息。</p>'*/
			        +'        <h3>4. 数据提取与取数审核</h3>'
			        +'        <h4>数据提取</h4>'
			        +'        <p>点击“新建任务”，经过“基本信息筛选”、“详细信息筛选”、“数据导出”确认提交后完成取数任务创建。</p>'
			        +'        <p>基本信息筛选：</p>'
			        +'        <img src="../src/image/helpDoc/14.png">'
			        +'        <p>详细信息筛选：</p>'
			        +'        <img src="../src/image/helpDoc/15.png">'
			        +'        <p>数据导出（选择导出属性）：</p>'
			        +'        <img src="../src/image/helpDoc/16.png">'
			        +'        <p>确认提交：</p>'
			        +'        <img src="../src/image/helpDoc/17.png">'
			        +'        <h4>取数审核</h4>'
			        +'        <p>页面上方显示“累计未审核病历数”。取数申请可按“全部申请”、“待审核申请”、“已审核申请”三种状态切换。</p>'
			        +'        <p>取数审核列表任务状态分5类：</p>'
			        +'        <ol>'
			        +'        	<li>待审核：取数任务已提交，管理员未审核时的状态。</li>'
			        +'        	<li>数据提取中：审核通过后，数据库准备数据过程时的状态。这个过程一般很短</li>'
			        +'        	<li>数据提取成功：数据库准备数据完成时的状态。</li>'
			        +'        	<li>已下载：数据完成一次下载后的状态。</li>'
			        +'        	<li>审核驳回：取数任务被管理员驳回。</li>'
			        +'        </ol>'
			        +'        <p>审核功能类似录入审核，点击“详情”查看取数信息。点击“审核”，选择 “通过”或“驳回”，填写审核理由，通过可不填写，如驳回需需填写理由。</p>'
			        +'    </div>'
			        +'    <div class="modal-footer">'
			        +'        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>'
			        +'    </div>'
			        +'</div><!-- /.modal-content -->'
			        +'</div><!-- /.modal-dialog -->'
			        +'</div><!-- /.modal -->',
        replace: true,
        link:function(scope,element,attrs){
        	
        }	
	};
});

angular.module("infi-basic").directive('normalHelpDoc',function(){
	return {
		restrict: 'ECMA',
		template: '<div class="modal fade" id="help" ng-if="!isAdmin">'
	        +'<div class="modal-dialog">'
	        +'<div class="modal-content">'
	        +'<div class="modal-header">'
	        +'        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only"></span></button>'
	        +'        <h1 class="modal-title modal-reset">帮助文档</h1>'
	        +'    </div>'
	        +'    <div class="modal-body">'
	        +'        <h3>1. 传染病调查表筛选</h3>'
	        +'        <p>通过一级页面右上角下拉列表切换所需疾病调查表，“数据录入”、“数据检索”、“数据提取”、“录入审核”、“查看审核”、“取数审核”均显示当前疾病调查表信息。</p>'
	        +'        <img src="../src/image/helpDoc/1.png">'
	        +'        <h3>2. 数据录入与录入审核</h3>'
	        +'        <h4>数据录入</h4>'
	        +'        <p>页面上方显示总体KPI，“本月录入病历数”、“本月录入病历通过率”、“本月待处理病历数”。</p>'
	        +'        <img src="../src/image/helpDoc/2.png">'
	        +'        <p>数据录入列表显示所有创建的病历，可通过创建时间筛选与当前状态筛选，快捷查找病历。可以查看病历详情，删除，与打印。注：病历在经过一次审核通过后不可删除。</p>'
	        +'        <p>当前状态分4类：</p>'
	        +'        <ol>'
	        +'        	<li>已保存：完成创建病历与完善资料后保存并返回时的状态。</li>'
	        +'        	<li>待审核：点击提交后，管理员未审核时的状态。</li>'
	        +'        	<li>审核通过：管理员审核通过后的状态。</li>'
	        +'        	<li>审核驳回：管理员审核驳回时的状态。</li>'
	        +'        </ol>'
	        +'        <h4>新增病历</h4>'
	        +'        <p>在数据录入列表点击“新增病历”，需填写“上报医院”、“病历号”、“第几次入院”，点击“创建”完成新增病历。</p>'
	        +'        <img src="../src/image/helpDoc/3.png">'
	        +'        <h4>完善资料</h4>'
	        +'        <p>本功能通常用于初次创建病历后完善资料，以及审核通过或驳回会对病历进行进一步完善与修改，在已提交后“待审核”状态不可使用。</p>'
	        +'        <p>点击“完善资料”，进入数据录入界面，通过点击页面右下角 “填写下一模块”与“左侧模块导航”切换模块，完成数据录入后点击“保存并返回”。</p>'
	        +'        <p>录入数据类型分为“文本型”、“单选型”、“复选型”、“日期型”、“图片型”。</p>'
	        +'        <p>文本型数据录入形式：</p>'
	        +'        <img src="../src/image/helpDoc/4.png">'
	        +'        <img src="../src/image/helpDoc/5.png">'
	        +'        <p>单选型数据录入形式：</p>'
	        +'        <img src="../src/image/helpDoc/6.png">'
	        +'        <p>复选型数据录入形式：</p>'
	        +'        <img src="../src/image/helpDoc/7.png">'
	        +'        <p>日期型数据录入形式：</p>'
	        +'        <img src="../src/image/helpDoc/8.png">'
	        +'        <p>图片型数据录入形式：</p>'
	        +'        <img src="../src/image/helpDoc/9.png">'
	        +'        <p>当前病历在完善资料时，如有曾经通过的版本，则在当前病历右侧显示该病历最近一次审核通过版本，页面中提示本模块共有几处不同，两份病历数据不同的字段在当前病历标记为红色，提供参考作用。</p>'
	        +'        <img src="../src/image/helpDoc/10.png">'
	        +'        <h4>医学影像</h4>'
	        +'        <p>为防止医学影像被其他人剽窃，在影像上传时系统会自动添加水印。</p>'
	        +'        <p>图像查看详情时可拖动，放大缩小，旋转，可单个下载，也可以批量下载。</p>'
	        +'        <img src="../src/image/helpDoc/11.png">'
	        +'        <h4>提交</h4>'
	        +'        <p>点击“提交”后弹出窗口询问是否提交。在“待审核”与“审核驳回”状态不能使用提交功能。审核驳回后，需完善资料再保存才可提交。</p>'
	        +'        <h4>审核驳回信息列表</h4>'
	        +'        <p>为避免因病历录入列表数据量过大，导致有些审核驳回的病历忘记修改，设置病理驳回信息列表，被驳回的病历可以由此进入修改，保存并返回后，该条驳回病历在本列表自动删除。</p>'
	        +'        <img src="../src/image/helpDoc/12.png">'
	        /*+'        <h3>3. 数据检索</h3>'
	        +'        <p>可通过输入关键词，点击热门关键词快速检索到相关病历。并查看病历详情。</p>'
	        +'        <img src="../src/image/helpDoc/13.png">'
	        +'        <h3>4. 查看审核</h3>'
	        +'        <p>审核普通用户发来的数据查看申请，审核通过后该用户可以查看申请数据的影像学信息。</p>'
	        +'        <h3>5. 数据提取与取数审核</h3>'
	        +'        <h4>数据提取</h4>'
	        +'        <p>点击“新建任务”，经过“基本信息筛选”、“详细信息筛选”、“数据导出”确认提交后完成取数任务创建。</p>'
	        +'        <p>基本信息筛选：</p>'
	        +'        <img src="../src/image/helpDoc/14.png">'
	        +'        <p>详细信息筛选：</p>'
	        +'        <img src="../src/image/helpDoc/15.png">'
	        +'        <p>数据导出（选择导出属性）：</p>'
	        +'        <img src="../src/image/helpDoc/16.png">'
	        +'        <p>确认提交：</p>'
	        +'        <img src="../src/image/helpDoc/17.png">'*/
	        +'    </div>'
	        +'    <div class="modal-footer">'
	        +'        <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>'
	        +'    </div>'
	        +'</div><!-- /.modal-content -->'
	        +'</div><!-- /.modal-dialog -->'
	        +'</div><!-- /.modal -->',
        replace: true,
        link:function(scope,element,attrs){
        	
        }	
	};
});

angular.module("infi-basic").directive('viewAttachments',function(){
	return {
		restrict: 'ECMA',
        template: '<div id="attachment" class="modal fade bs-example-modal-lg" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">'
        	+'<div class="modal-dialog modal-lg">'
        	+'	<div class="modal-content">'
        	+'		<div class="modal-header">'
        	+'			<h2 class="modal-title">中国传染病放射影像大数据共享平台-数据共享协议</h2>'
        	+'		</div>'
        	+'		<div class="modal-body">'
        	+'			<div class="infi-authority-title">'
        	+'				<ul class="row">'
        	+'					<li class="col-md-6">'
        	+'						<p>甲方：中国传染病放射影像大数据共享平台</p>'
        	+'					</li>'
        	+'					<li class="col-md-6">'
		  							/*+'<p>乙方：'+hospital+' - '+loginName+'</p>'*/
		  	+'					</li>'
		  	+'				</ul>'
		  	+'			</div>'
		  	+'			<div class="infi-authority-info">'
		  	+'   			<p>&nbsp;&nbsp;鉴于：甲方是“中国传染病放射影像大数据共享平台”（以下简称：“数据共享平台”）建设方，拥有“数据共享平台”使用管理权，乙方拥有大量的放射影像大数据和资料积累，为促进中国传染病放射影像大数据研究，更好的支撑传染病临床医疗，充分挖掘共享数据的价值，推动中国传染病诊治医疗水平的快速发展，双方已对“数据共享平台”的数据共享以及使用合作达成一致意向。现为规范“数据共享平台”数据资料使用，保证数据资料安全，防治数据泄密，双方就“数据共享平台”上数据的共享达成如下协议：</p>'
		  	+'   			<ol>'
		  	+'   				<li>乙方同意接受甲方的数据使用申请，将乙方放射影像数据接入甲方“数据共享平台”使用。甲方同意乙方作为“数据共享平台”平台用户享有用户权限。</li>'
		  	+'   				<li>“数据共享平台”上的一切数据和资料版权归数据和资料原生产单位与数据平台所有权方共同所有。</li>'
		  	+'   				<li>“数据共享平台”上一切数据和资料仅供平台用户用作科研目的（医学论著、医学专著的撰写），平台用户不得用于商业目的，不得将数据转让给第三方，由此引起的一切后果由平台用户承担。</li>'
		  	+'   				<li>保障数据开发者著作权，平台用户在使用全部或部分“数据共享平台”上的数据和功能基础上所产出的研究成果（包括但不限于公开发表的论文、论著、数据产品和未公开发表的研究报告、数据产品、系统开发等），须在相关成果显著位置上明确标注数据来源。</li>'
		  	+'   				<li>使用“数据共享平台”数据和功能的平台用户须依据以下规范注明数据来源：<br/>'
		  	+'中文发表的成果依据以下规范注明：<br/>&nbsp;&nbsp;&nbsp;&nbsp;数据来源于“中国传染病放射影像大数据共享平台”（http://101.200.145.27:8080/platform/login）<br/>'
		  	+'英文发表的成果依据以下规范注明：<br/>&nbsp;&nbsp;&nbsp;&nbsp;This data set is provided by Chinese big-data platform on medical imaging of infectious diseases (http://101.200.145.27:8080/platform/login)</li>'
		  	+'    				<li>甲乙双方均不得使用“数据共享平台”所共享的数据和资料从事危害国家安全、社会公共利益和他人合法权益的活动。</li>'
		  	+'   				<li>乙方不得以任何方式对“数据共享平台”进行解密或其他破坏原始程序设计的操作。</li>'
		  	+'   				<li>乙方不得复制和扩散“数据共享平台”资料。凡以直接、间接、口头或书面等形式提供涉及保密内容的行为均属泄密。</li>'
		  	+'   				<li>甲方所提供给乙方的帐号仅限于乙方本人使用，乙方应妥善保管帐号，不得转借乙方之外的第三方人员使用。</li>'
		  	+'   				<li>若平台用户违反本协议规定，甲方有权责令平台用户停止使用“数据共享平台”上的数据并归还甲方，且将再复制的该数据及其衍生品全部删除。</li>'
		  	+'   				<li>本协议自双方签章之日起生效，有效期15年，并且不因双方其他协议的签订而失去效力。</li>'
		  	+'   			</ol>'
		  	+'   			<form class="infi-authority-form">'
		  	+'   				<label>'
		  	+'   					<input class="" type="radio" name="agreementAuth" value="1" checked ="checked" disabled="disabled">'
		  	+'   					本人已充分充分阅读、理解并接受本协议的全部内容，并同意遵循本协议的所有约定。'
		  	+'		        				</label>'
		  	+'   			</form>'
		  	+'   		</div>'
		  	+'   		<div class="infi-authority-autograph">'
		  	+'				<ul>'
		  	+'					<li>'
		  	+'						<p>甲方代表人：中国传染病放射影像大数据共享平台</p>'
		  	+'						<p></p>'
		  	+'					</li>'
		  	+'					<li>'
		  	/*+'						<p>乙方代表人：'+loginName+'</p>'*/
		  	+'						<p></p>'
		  	+'					</li>'
		  	+'				</ul>'
		  	+'			</div>'
		  	+'		</div>'
		  	+'		<div class="modal-footer">'
		  	+'   		<button class="btn btn-default" type="button" data-dismiss="modal">关闭</button>'
		  	+'		</div>'
		  	+'	</div>'
		  	+'	</div>'
		  	+'</div>',
        replace: true,
        link:function(scope,element,attrs){
        	
        }	
	};
});